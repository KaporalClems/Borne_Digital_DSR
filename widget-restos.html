<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget Restaurants Fixe</title>
    <!-- Utilisation de Tailwind CSS pour un style moderne et responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Styles personnalisés pour la mise en page de la grille */
        .grid-container {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            /* Hauteur fixe pour le conteneur pour éviter les barres de défilement */
            height: 450px; /* Ajustez la hauteur si nécessaire pour que tout le contenu rentre */
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans p-6">

    <div class="mx-auto max-w-6xl">
        <h1 class="text-3xl font-bold text-center mb-6 text-gray-800">Liste des Restaurants</h1>
        
        <!-- Conteneur principal du widget -->
        <div id="resto-container" class="grid-container">
            <!-- Les cartes des restaurants seront insérées ici par JavaScript -->
        </div>
    </div>

    <script>
        // Fonction asynchrone pour récupérer les données et les afficher
        async function fetchRestaurants() {
            try {
                // Récupération des données depuis le fichier JSON
                const response = await fetch("restaurants.json");
                const restos = await response.json();
                
                const container = document.getElementById('resto-container');
                
                // Parcours de la liste des restaurants pour créer et insérer les cartes
                restos.forEach(resto => {
                    const card = document.createElement('div');
                    card.className = "bg-white p-4 rounded-lg shadow-md flex flex-col items-center justify-start";
                    card.innerHTML = `
                        <!-- Image du restaurant -->
                        <img 
                            src="${resto.image}" 
                            alt="${resto.name}" 
                            class="w-full h-32 object-cover rounded-lg mb-4"
                            onerror="this.onerror=null;this.src='https://placehold.co/400x300/FCA311/000000?text=Image+Non+Trouvée';"
                        >
                        <!-- Nom du restaurant -->
                        <h3 class="text-xl font-semibold text-center mt-auto">${resto.name}</h3>
                        <!-- Note et ville -->
                        <p class="text-gray-600 text-sm mt-1">⭐️ ${resto.rating}/5 • ${resto.commune}</p>
                    `;
                    container.appendChild(card);
                });
            } catch (error) {
                console.error("Erreur lors du chargement des restaurants :", error);
                const container = document.getElementById('resto-container');
                container.innerHTML = `<p class="text-center text-red-500">Impossible de charger les restaurants. Veuillez réessayer plus tard.</p>`;
            }
        }
        
        // Appel de la fonction pour charger les restaurants au chargement de la page
        fetchRestaurants();
    </script>
</body>
</html>
