<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Page d'Accueil Glissante</title>
    <!-- Inclut Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Pacifico&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Bibliothèque pour la génération de QR code -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d121c;
            overflow: hidden; /* Empêche le défilement du corps de la page */
            user-select: none;
            -webkit-user-select: none;
            touch-action: none; /* Empêche le pinch-to-zoom */
        }

        /* Styles pour le mode contraste élevé */
        body.high-contrast {
            filter: invert(1) hue-rotate(180deg);
            background-color: #fff; /* S'assure que le fond est blanc */
        }
        
        body.high-contrast #video-background {
             filter: invert(1) hue-rotate(180deg);
        }

        /* Styles pour la taille de police augmentée */
        body.larger-text h1 { font-size: 8rem; }
        body.larger-text h2 { font-size: 5rem; }
        body.larger-text .text-2xl { font-size: 2rem; }
        body.larger-text .text-lg { font-size: 1.5rem; }

        .slider-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .screen {
            min-width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* Disposition en colonne par défaut, en ligne sur les grands écrans */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            max-width: 1280px;
            width: 100%;
        }

        @media (min-width: 1024px) {
            .main-content {
                flex-direction: row;
            }
        }
        
        .left-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            max-width: 100%;
        }

        .right-panel {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: 1.5rem;
            max-width: 900px;
            width: 100%;
            margin-top: 2rem;
        }

        @media (min-width: 1024px) {
            .right-panel {
                grid-template-columns: repeat(3, 1fr);
                margin-top: 0;
            }
        }

        .grid-item {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            text-decoration: none;
            color: white;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            will-change: transform, box-shadow;
            text-align: center;
        }

        .grid-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2), 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        /* Styles pour le widget de pagination */
        .dot {
            width: 0.75rem;
            height: 0.75rem;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 9999px;
            transition: all 0.3s ease-in-out;
        }

        .dot.active {
            background-color: white;
            transform: scale(1.2);
        }
        
        .grid-icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .grid-icon.image {
            width: 4rem; /* Taille de l'image */
            height: 4rem; /* Taille de l'image */
            object-fit: contain; /* S'assure que l'image tient dans le conteneur */
        }
        
        /* Styles de base de la modale */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            overflow: auto;
        }

        /* NOUVEAU: Styles pour la modale universelle */
        .modal-content {
            background-color: #1e293b;
            padding: 1.5rem; /* Ajout de padding */
            border-radius: 1rem;
            width: 95%;
            max-width: 1400px;
            max-height: 90vh;
            position: relative;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease-out;
            margin: 20px;
            display: flex; /* Utilisation de flexbox */
            flex-direction: column;
            overflow: hidden; /* Empêche le défilement à l'intérieur de la modale */
        }

        .close-button {
            position: absolute;
            top: 1rem; /* Mieux positionné */
            right: 1rem; /* Mieux positionné */
            font-size: 2rem;
            color: white;
            cursor: pointer;
            transition: color 0.2s;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            padding: 0.5rem;
            line-height: 1;
            z-index: 10;
        }
        .close-button:hover {
            color: #ccc;
        }

        .modal-iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 1rem;
            flex-grow: 1; /* Permet à l'iframe de prendre tout l'espace restant */
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .widget-iframe {
            width: 100%;
            height: 350px;
            border: none;
            border-radius: 10px;
        }
        .modal-title {
            font-family: 'Pacifico', cursive;
            font-size: 3rem;
            color: #d1d5db;
        }
        #video-background {
            position: fixed;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            z-index: -100;
            transform: translateX(-50%) translateY(-50%);
            background-size: cover;
        }
        .fixed-buttons {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .icon-button {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 9999px;
            padding: 0.75rem;
            color: white;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
            transition: transform 0.2s, background-color 0.2s;
        }
        .icon-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        /* Styles pour les flèches de navigation */
        .nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            background-color: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 9999px;
            padding: 1rem;
            color: white;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
            transition: opacity 0.3s, transform 0.3s;
            will-change: transform;
            opacity: 1;
        }
        .nav-arrow.left {
            left: 2rem;
        }
        .nav-arrow.right {
            right: 2rem;
        }
        .nav-arrow.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .nav-arrow svg {
            width: 2rem;
            height: 2rem;
        }
        .nav-arrow:hover {
            transform: translateY(-50%) scale(1.1);
        }

        /* Animation de pulsation pour attirer le regard */
        @keyframes pulse-arrow {
            0% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-50%) scale(1.05); }
            100% { transform: translateY(-50%) scale(1); }
        }
        .nav-arrow.animate-pulse {
            animation: pulse-arrow 1.5s infinite;
        }

        /* NOUVEAU: Styles pour optimiser la modale en mode paysage */
        @media (orientation: landscape) and (min-width: 768px) {
            .modal-content.landscape-mode {
                max-width: 90%;
                max-height: 90vh;
                width: 90vw;
                height: 90vh;
                padding: 2rem;
            }
            .modal-iframe.landscape-mode {
                /* S'assure que l'iframe remplit l'espace vertical */
                height: calc(100% - 4rem); /* Hauteur moins le padding */
            }
        }

        /* NOUVEAU: Styles pour optimiser la modale en mode portrait */
        @media (orientation: portrait) {
            .modal-content.portrait-mode {
                max-width: 95%;
                max-height: 90vh;
                padding: 1.5rem;
            }
            .modal-iframe.portrait-mode {
                height: calc(100% - 3rem); /* Hauteur moins le padding */
            }
        }

        /* NOUVEAU: Styles pour l'affichage de l'heure et de la date */
        .time-date-widget {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 100;
            color: white;
            text-align: left;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .time-date-widget .time {
            font-size: 3rem; /* Taille de la police pour l'heure */
            font-weight: 700;
        }

        .time-date-widget .date {
            font-size: 1.5rem; /* Taille de la police pour la date */
            font-weight: 400;
            opacity: 0.8;
            margin-top: -0.5rem;
        }

        @media (max-width: 768px) {
            .time-date-widget {
                top: 1rem;
                left: 1rem;
            }
            .time-date-widget .time {
                font-size: 2rem;
            }
            .time-date-widget .date {
                font-size: 1rem;
            }
        }
        
        /* Styles pour le module de contact en bas à droite */
        .module-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            flex-direction: column-reverse;
            align-items: flex-end;
            gap: 1rem;
            z-index: 1000;
        }

        /* Style des boutons */
        .btn {
            width: 3.5rem;
            height: 3.5rem;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 9999px;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .btn:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        /* Couleurs et icônes spécifiques */
        .btn-main {
            background-image: linear-gradient(135deg, #6EE7B7, #34D399); /* Tailwind: from-emerald-400 to-green-500 */
        }
        .btn-chatbot { background-color: #60A5FA; /* Tailwind: blue-400 */ }
        .btn-message { background-color: #F87171; /* Tailwind: red-400 */ }
        .btn-newsletter { background-color: #FBBF24; /* Tailwind: amber-400 */ }
        .btn-facebook { background-color: #3B82F6; /* Tailwind: blue-500 */ }
        .btn-instagram { background-color: #EC4899; /* Tailwind: pink-500 */ }

        /* Style des fenêtres modales du module de contact */
        .modal-contact {
            position: absolute;
            bottom: calc(100% + 1rem); /* Positionne au-dessus des boutons */
            right: 0;
            width: 25rem;
            max-width: 90vw;
            border-radius: 1.5rem; /* Tailwind: rounded-3xl */
            padding: 1.5rem;
            color: #E5E7EB; /* Couleur du texte par défaut */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            transform-origin: bottom right;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: scale(0.95) translateY(1rem);
            pointer-events: none;
        }
        /* Couleurs des modales basées sur les boutons */
        .modal-chatbot { background-color: #3B82F6; }
        .modal-message { background-color: #F87171; }
        .modal-newsletter { background-color: #FBBF24; }
        .modal-facebook { background-color: #3B82F6; }
        .modal-instagram { background-color: #EC4899; }

        .modal-contact.active {
            opacity: 1;
            transform: scale(1) translateY(0);
            pointer-events: auto;
        }

        .modal-contact-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .modal-contact-title {
            font-size: 1.25rem; /* Tailwind: text-xl */
            font-weight: 700; /* Tailwind: font-bold */
        }

        .modal-contact-close-btn {
            background: none;
            border: none;
            color: white; /* Bouton de fermeture blanc pour une meilleure lisibilité */
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        .modal-contact-close-btn:hover {
            opacity: 0.7;
        }

        .modal-contact-content {
            font-size: 1rem;
            color: #E5E7EB; /* Tailwind: gray-200 */
        }

        /* Animation des boutons individuels */
        .btn-group {
            display: flex;
            flex-direction: column-reverse;
            align-items: flex-end;
            gap: 1rem;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            transform: translateY(0);
            opacity: 1;
        }

        .btn-group.hidden {
            transform: translateY(2rem);
            opacity: 0;
            pointer-events: none;
        }

        .qr-code {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 1rem;
            padding: 0.5rem;
            background-color: white;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body>
    <video autoplay muted loop id="video-background">
        <source src="https://raw.githubusercontent.com/KaporalClems/Borne_Digital_DSR/4b24136854869ddd073bf02729c517f463686795/Destination%20Sud%20R%C3%A9union_HD.mp4" type="video/mp4">
    </video>

    <!-- Élément pour afficher l'heure et la date en haut à gauche -->
    <div class="time-date-widget">
        <div id="time-display" class="time"></div>
        <div id="date-display" class="date"></div>
    </div>

    <!-- Flèches de navigation animées -->
    <button id="prev-arrow" class="nav-arrow left hidden">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
    </button>
    <button id="next-arrow" class="nav-arrow right">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
    </button>

    <div class="slider-container">
        <!-- Écran 1 -->
        <div id="screen-1" class="screen">
            <div class="main-content lg:flex-row flex-col">
                <div class="left-panel">
                    <img src="https://www.sudreuniontourisme.fr/fileadmin/user_upload/Sud/logo.png" alt="Logo de l'Office de Tourisme du Sud de La Réunion" class="h-auto w-48 mb-4 object-contain">
                    <h1 class="text-white text-4xl md:text-5xl lg:text-6xl font-bold">Destination Sud Réunion</h1>
                    <h2 class="text-white text-xl md:text-2xl lg:text-3xl mt-4">Office de Tourisme du Sud de La Réunion</h2>
                    <div class="mt-8 flex flex-col sm:flex-row gap-4">
                        <button id="open-button-1" class="px-4 py-3 sm:px-6 sm:py-3 bg-white text-gray-900 rounded-full font-semibold hover:bg-gray-200 transition-colors">En savoir plus</button>
                        <button id="next-screen-1" class="px-4 py-3 sm:px-6 sm:py-3 border border-white text-white rounded-full font-semibold hover:bg-white hover:text-gray-900 transition-colors">Découvrir les activités</button>
                    </div>
                </div>
                <div class="right-panel">
                    <!-- CHANGEMENT : utilisation de div avec un attribut de données pour la modale -->
                    <div class="grid-item" data-modal-target="Destinationplage.html" data-modal-title="Les Plages">
                        <span class="grid-icon">🏖️</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Les Plages</span>
                    </div>
                    <div class="grid-item" data-modal-target="Destinationvolcan.html" data-modal-title="Le Volcan">
                        <span class="grid-icon">🌋</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Le Volcan</span>
                    </div>
                    <div class="grid-item" data-modal-target="Destinationforet.html" data-modal-title="Les Forêts">
                        <span class="grid-icon">🌲</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Les Forêts</span>
                    </div>
                    <div class="grid-item" data-modal-target="Destinationvillages.html" data-modal-title="Les Villages">
                        <span class="grid-icon">🏡</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Les Villages</span>
                    </div>
                    <!-- CHANGEMENT ICI : Remplacement du bouton 'Widget Personnalisé' par 'Restaurants' -->
                    <div class="grid-item" data-modal-target="DestinationRestos.html" data-modal-title="Restaurants">
                        <span class="grid-icon"><i class="fas fa-utensils"></i></span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Restaurants</span>
                    </div>
                     <!-- AJOUT DU BOUTON HEBERGEMENTS -->
                    <div class="grid-item" data-modal-target="Destinationhebergements.html" data-modal-title="Hébergements">
                        <span class="grid-icon">🏨</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Hébergements</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Écran 2 -->
        <div id="screen-2" class="screen">
            <div class="main-content lg:flex-row flex-col">
                <div class="left-panel">
                    <h1 class="text-white text-4xl md:text-5xl lg:text-6xl font-bold">L'île authentique</h1>
                    <h2 class="text-white text-xl md:text-2xl lg:text-3xl mt-4">La Réunion</h2>
                    <div class="mt-8 flex flex-col sm:flex-row gap-4">
                        <button id="open-button-2" class="px-4 py-3 sm:px-6 sm:py-3 bg-white text-gray-900 rounded-full font-semibold hover:bg-gray-200 transition-colors">En savoir plus</button>
                        <button id="prev-screen-2" class="px-4 py-3 sm:px-6 sm:py-3 border border-white text-white rounded-full font-semibold hover:bg-white hover:text-gray-900 transition-colors">Retour</button>
                        <button id="next-screen-2" class="px-4 py-3 sm:px-6 sm:py-3 border border-white text-white rounded-full font-semibold hover:bg-white hover:text-gray-900 transition-colors">Activités ludiques</button>
                    </div>
                </div>
                <div class="right-panel">
                    <!-- CHANGEMENT : utilisation de div avec un attribut de données pour la modale -->
                    <div class="grid-item" data-modal-target="DestinationRandos.html" data-modal-title="Les Randonnées">
                        <span class="grid-icon">🥾</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Les Randonnées</span>
                    </div>
                    <div class="grid-item" data-modal-target="Destinationactivitesnautiques.html" data-modal-title="Activités Nautiques">
                        <span class="grid-icon">🌊</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Activités Nautiques</span>
                    </div>

                    <!-- Widget Météo -->
                    <div class="grid-item col-span-2 bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-xl">
                        <div class="flex flex-col items-center justify-center h-full">
                            <span class="text-4xl md:text-5xl lg:text-6xl mb-2">☀️</span>
                            <div class="flex items-end justify-center">
                                <span class="text-5xl md:text-6xl font-extrabold">+27</span>
                                <span class="text-xl md:text-2xl font-bold">°C</span>
                            </div>
                            <span class="text-xs md:text-sm lg:text-lg font-medium mt-1">Paris</span>
                            <span class="text-xs md:text-sm">Ensoleillé avec quelques nuages</span>
                        </div>
                    </div>
                     <!-- Widget Restaurants -->
                    <div class="grid-item col-span-2 bg-gradient-to-br from-green-400 to-green-600 text-white shadow-xl">
                        <div class="flex flex-col items-center justify-center h-full w-full">
                            <h3 class="text-lg md:text-xl font-semibold mb-2"> <iframe src="widget-restos.html" onload="resizeIframe(this)" style="border:none; width:100%; height:350px; border-radius:10px;" loading="lazy"> </iframe> </div>
                        </div>
                    <div class="grid-item" data-modal-target="Destinationculture.html" data-modal-title="Culture & Traditions">
                        <span class="grid-icon">🎭</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Culture & Traditions</span>
                    </div>
                    <div class="grid-item" data-modal-target="Destinationproduits.html" data-modal-title="Produits du Terroir">
                        <span class="grid-icon">🍍</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Produits du Terroir</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Écran 3 -->
        <div id="screen-3" class="screen">
            <div class="main-content lg:flex-row flex-col">
                <div class="left-panel">
                    <h1 class="text-white text-4xl md:text-5xl lg:text-6xl font-bold">L'île aventure</h1>
                    <h2 class="text-white text-xl md:text-2xl lg:text-3xl mt-4">La Réunion</h2>
                    <div class="mt-8 flex flex-col sm:flex-row gap-4">
                        <button id="open-button-3" class="px-4 py-3 sm:px-6 sm:py-3 bg-white text-gray-900 rounded-full font-semibold hover:bg-gray-200 transition-colors">En savoir plus</button>
                        <button id="prev-screen-3" class="px-4 py-3 sm:px-6 sm:py-3 border border-white text-white rounded-full font-semibold hover:bg-white hover:text-gray-900 transition-colors">Retour</button>
                        <button id="next-screen-3" class="px-4 py-3 sm:px-6 sm:py-3 border border-white text-white rounded-full font-semibold hover:bg-white hover:text-gray-900 transition-colors">Transports</button>
                    </div>
                </div>
                <div class="right-panel">
                    <div class="grid-item col-span-2" data-modal-target="DestinationActivitesaeriennes.html" data-modal-title="Activités Aériennes">
                        <span class="grid-icon">🚁</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Activités Aériennes</span>
                    </div>
                    <div class="grid-item" data-modal-target="Destinationparcs.html" data-modal-title="Parcs & Aventures">
                        <span class="grid-icon">🎢</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Parcs & Aventures</span>
                    </div>
                    <div class="grid-item" data-modal-target="Destinationbienetre.html" data-modal-title="Bien-être & Spa">
                        <span class="grid-icon">🧘‍♀️</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Bien-être & Spa</span>
                    </div>
                    <div class="grid-item" data-modal-target="Destinationgastronomie.html" data-modal-title="Gastronomie">
                        <span class="grid-icon">🍽️</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Gastronomie</span>
                    </div>
                    <div class="grid-item" data-modal-target="Destinationshops.html" data-modal-title="Boutiques & Shopping">
                        <span class="grid-icon">🛍️</span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Boutiques & Shopping</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Écran 4 - Transports -->
        <div id="screen-4" class="screen">
            <div class="main-content lg:flex-row flex-col">
                <div class="left-panel">
                    <h1 class="text-white text-4xl md:text-5xl lg:text-6xl font-bold">Se déplacer sur l'île</h1>
                    <h2 class="text-white text-xl md:text-2xl lg:text-3xl mt-4">Transports à La Réunion</h2>
                    <div class="mt-8 flex flex-col sm:flex-row gap-4">
                        <button id="prev-screen-4" class="px-4 py-3 sm:px-6 sm:py-3 border border-white text-white rounded-full font-semibold hover:bg-white hover:text-gray-900 transition-colors">Retour</button>
                    </div>
                </div>
                <div class="right-panel">
                    <div class="grid-item" data-modal-target="https://www.alterneo.re/" data-modal-title="Alternéo">
                        <img src="https://play-lh.googleusercontent.com/Tx9xScdzNlrbW7Z9ZtAZGjgaEKuX3yb2MNI9fzgePfCwpJzWMFELLE3_R-50YLvtPS58" alt="Logo Alternéo" class="grid-icon image">
                        <span class="text-sm md:text-lg lg:text-xl font-semibold mt-2">Alternéo</span>
                        <span class="text-xs mt-1 opacity-75">Bus</span>
                    </div>
                    <div class="grid-item" data-modal-target="https://plan.iledelareunion-mobilites.re/fr/" data-modal-title="Île de la Réunion mobilité">
                        <!-- Utilisation de l'image pour le logo -->
                        <img src="https://play-lh.googleusercontent.com/jJSAzPO2U5ELT0x9ZydfDdmm0fZHPLoWBevKpS1ek1JC2nNOw3f0c6YYoq8HNN7TngW7=w600-h300-pc0xffffff-pd" alt="Logo Île de la Réunion Mobilités" class="grid-icon image">
                        <span class="text-sm md:text-lg lg:text-xl font-semibold mt-2">Île de la Réunion mobilité</span>
                        <span class="text-xs mt-1 opacity-75">Bus</span>
                    </div>
                    <div class="grid-item" data-modal-target="https://www.carjaune.re/" data-modal-title="Car Jaune">
                        <!-- CHANGEMENT ICI : Utilisation de l'image pour le logo -->
                        <img src="https://play-lh.googleusercontent.com/PuFhXjzOZHOSK7gmmWouLfoTP27dyyYM2YfLIHdSaL8-0EjRbCzZme9fpHs2JV24t7U" alt="Logo Car Jaune" class="grid-icon image">
                        <span class="text-sm md:text-lg lg:text-xl font-semibold mt-2">Car Jaune</span>
                        <span class="text-xs mt-1 opacity-75">Bus</span>
                    </div>
                    <div class="grid-item" data-modal-target="https://www.google.com/maps/d/u/0/viewer?mid=1wUlLrIM14aWYlVVK48vlBBeEA0-atJI&femb=1&ll=-21.31146667663178%2C55.441023438977055&z=14" data-modal-title="Altervélo">
                        <span class="grid-icon"><i class="fas fa-biking"></i></span>
                        <span class="text-sm md:text-lg lg:text-xl font-semibold">Altervélo</span>
                        <span class="text-xs mt-1 opacity-75">Carte</span>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Conteneur principal du module de contact -->
    <div class="module-container">

        <!-- Groupe de boutons secondaires -->
        <div class="btn-group hidden">
            <!-- Bouton Chatbot -->
            <div id="btn-chatbot" class="btn btn-chatbot">
                <i class="fas fa-comment-dots text-xl"></i>
            </div>
            <!-- Bouton Message -->
            <div id="btn-message" class="btn btn-message">
                <i class="fas fa-envelope text-xl"></i>
            </div>
            <!-- Bouton Newsletter -->
            <div id="btn-newsletter" class="btn btn-newsletter">
                <i class="fas fa-paper-plane text-xl"></i>
            </div>
            <!-- Bouton Facebook -->
            <div id="btn-facebook" class="btn btn-facebook">
                <i class="fab fa-facebook-f text-xl"></i>
            </div>
            <!-- Bouton Instagram -->
            <div id="btn-instagram" class="btn btn-instagram">
                <i class="fab fa-instagram text-xl"></i>
            </div>
        </div>

        <!-- Bouton principal (bouton d'ouverture/fermeture) -->
        <div id="btn-main-contact" class="btn btn-main">
            <i class="fas fa-plus text-2xl transition-transform duration-300 rotate-0"></i>
        </div>

        <!-- Fenêtres modales -->

        <!-- Modale Chatbot -->
        <div id="modal-chatbot" class="modal-contact">
            <div class="modal-contact-header">
                <h3 class="modal-contact-title">Besoin d'aide?</h3>
                <button class="modal-contact-close-btn">&times;</button>
            </div>
            <div class="modal-contact-content">
                <p>Nous sommes experts en design web et SEO technique.</p>
                <div class="mt-4">
                    <input type="text" placeholder="Envoyez votre message..." class="w-full p-3 rounded-lg bg-white bg-opacity-20 border-none text-white placeholder-gray-200 focus:outline-none">
                </div>
            </div>
        </div>

        <!-- Modale Message -->
        <div id="modal-message" class="modal-contact">
            <div class="modal-contact-header">
                <h3 class="modal-contact-title">Laissez-nous un message</h3>
                <button class="modal-contact-close-btn">&times;</button>
            </div>
            <div class="modal-contact-content">
                <p>Contactez-nous directement par e-mail ou via ce formulaire. Nous vous répondrons dans les plus brefs délais.</p>
                <!-- Formulaire de contact qui sera soumis avec fetch -->
                <form id="message-form" class="mt-4">
                    <input type="email" name="email" placeholder="Votre adresse e-mail" class="w-full mb-2 p-3 rounded-lg bg-white bg-opacity-20 border-none text-white placeholder-gray-200 focus:outline-none" required>
                    <textarea name="message" placeholder="Votre message" rows="4" class="w-full p-3 rounded-lg bg-white bg-opacity-20 border-none text-white placeholder-gray-200 focus:outline-none" required></textarea>
                    <button type="submit" class="w-full mt-2 p-3 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors">Envoyer</button>
                    <!-- Message de confirmation -->
                    <p id="message-status" class="hidden text-center mt-2"></p>
                </form>
            </div>
        </div>

        <!-- Modale Newsletter -->
        <div id="modal-newsletter" class="modal-contact">
            <div class="modal-contact-header">
                <h3 class="modal-contact-title">Abonnez-vous à notre Newsletter</h3>
                <button class="modal-contact-close-btn">&times;</button>
            </div>
            <div class="modal-contact-content">
                <p>Restez informé des dernières actualités, des offres exclusives et des nouveautés.</p>
                <!-- Formulaire de newsletter -->
                <form id="newsletter-form" class="mt-4">
                    <input type="email" name="email" placeholder="Votre adresse e-mail" class="w-full p-3 rounded-lg bg-white bg-opacity-20 border-none text-white placeholder-gray-200 focus:outline-none" required>
                    <button type="submit" class="w-full mt-2 p-3 bg-white bg-opacity-20 text-white rounded-lg hover:bg-opacity-30 transition-colors">S'abonner</button>
                    <!-- Message de confirmation pour la newsletter -->
                    <p id="newsletter-status" class="hidden text-center mt-2"></p>
                </form>
            </div>
        </div>

        <!-- Modale Facebook -->
        <div id="modal-facebook" class="modal-contact">
            <div class="modal-contact-header">
                <h3 class="modal-contact-title">Retrouvez-nous sur Facebook</h3>
                <button class="modal-contact-close-btn">&times;</button>
            </div>
            <div class="modal-contact-content">
                <p>Scannez le code QR ci-dessous avec l'appareil photo de votre téléphone pour accéder directement à notre page Facebook.</p>
                <div id="qrcode-facebook" class="qr-code"></div>
            </div>
        </div>

        <!-- Modale Instagram -->
        <div id="modal-instagram" class="modal-contact">
            <div class="modal-contact-header">
                <h3 class="modal-contact-title">Suivez-nous sur Instagram</h3>
                <button class="modal-contact-close-btn">&times;</button>
            </div>
            <div class="modal-contact-content">
                <p>Scannez le code QR ci-dessous pour découvrir nos dernières publications et histoires sur Instagram.</p>
                <div id="qrcode-instagram" class="qr-code"></div>
            </div>
        </div>

    </div>
    
    <!-- Modale universelle pour les liens des grilles -->
    <div id="universal-modal" class="modal">
        <div id="modal-content" class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-title" class="modal-title mb-4"></h2>
            <iframe id="modal-destination-iframe" class="modal-iframe"></iframe>
        </div>
    </div>
    
    <!-- Widget de pagination -->
    <div id="pagination-widget" class="fixed bottom-8 left-1/2 -translate-x-1/2 flex gap-2 z-20">
        <div class="dot active"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
    </div>

    <!-- Script principal -->
    <script>
        // ===============================
        // VARIABLES GLOBALES
        // ===============================
        let slider = document.querySelector('.slider-container');
        let screens = document.querySelectorAll('.screen');
        let currentIndex = 0;
        let isDragging = false;
        let startPos = 0;
        let currentTranslate = 0;
        let prevTranslate = 0;
        let animationID = 0;
        let lastInteractionTime = Date.now();
        const inactivityTimeout = 30000; // 30 secondes d'inactivité
        let inactivityTimer;

        // Récupération des éléments
        const prevArrow = document.getElementById('prev-arrow');
        const nextArrow = document.getElementById('next-arrow');
        const dots = document.querySelectorAll('#pagination-widget .dot');
        const modal = document.getElementById('universal-modal');
        const modalContent = document.getElementById('modal-content');
        const modalTitle = document.getElementById('modal-title');
        const modalDestinationIframe = document.getElementById('modal-destination-iframe');
        const closeButton = document.querySelector('.close-button');
        const gridItems = document.querySelectorAll('.grid-item[data-modal-target]');

        // Variables pour le module de contact
        const mainButtonContact = document.getElementById('btn-main-contact');
        const mainIconContact = mainButtonContact.querySelector('i');
        const buttonGroupContact = document.querySelector('.btn-group');
        const modalsContact = document.querySelectorAll('.modal-contact');
        const closeButtonsContact = document.querySelectorAll('.modal-contact-close-btn');
        const socialButtons = document.querySelectorAll('.btn-group .btn');
        const messageForm = document.getElementById('message-form');
        const newsletterForm = document.getElementById('newsletter-form');
        let isContactOpen = false;
            
        // Mappe les ID des boutons aux couleurs correspondantes
        const modalColorClasses = [
            'modal-chatbot',
            'modal-message',
            'modal-newsletter',
            'modal-facebook',
            'modal-instagram'
        ];


        // ===============================
        // FONCTIONS DE GESTION DU SLIDER
        // ===============================

        function setSliderPosition() {
            slider.style.transform = `translateX(${currentTranslate}px)`;
        }

        function handleStart(e) {
            resetInactivityTimer();
            isDragging = true;
            startPos = getPositionX(e);
            animationID = requestAnimationFrame(animation);
            slider.classList.add('transition-none');
        }

        function handleMove(e) {
            if (!isDragging) return;
            const currentPosition = getPositionX(e);
            currentTranslate = prevTranslate + currentPosition - startPos;
        }

        function handleEnd() {
            cancelAnimationFrame(animationID);
            isDragging = false;
            const movedBy = currentTranslate - prevTranslate;

            if (movedBy < -100 && currentIndex < screens.length - 1) {
                currentIndex += 1;
            } else if (movedBy > 100 && currentIndex > 0) {
                currentIndex -= 1;
            }

            setPositionByIndex();
            slider.classList.remove('transition-none');
        }
        
        function handleWheel(e) {
            e.preventDefault();
            resetInactivityTimer();
            
            if (e.deltaX > 0 && currentIndex < screens.length - 1) {
                currentIndex++;
            } else if (e.deltaX < 0 && currentIndex > 0) {
                currentIndex--;
            }
            setPositionByIndex();
        }


        function getPositionX(e) {
            return e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
        }

        function setPositionByIndex() {
            currentTranslate = currentIndex * -window.innerWidth;
            prevTranslate = currentTranslate;
            setSliderPosition();
            updateSlider();
        }

        function animation() {
            setSliderPosition();
            if (isDragging) requestAnimationFrame(animation);
        }

        function updateSlider() {
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentIndex);
            });
            prevArrow.classList.toggle('hidden', currentIndex === 0);
            nextArrow.classList.toggle('hidden', currentIndex === screens.length - 1);

            prevArrow.classList.remove('animate-pulse');
            nextArrow.classList.remove('animate-pulse');

            if (currentIndex === 0) {
                nextArrow.classList.add('animate-pulse');
            } else if (currentIndex === screens.length - 1) {
                prevArrow.classList.add('animate-pulse');
            }
        }

        // ===============================
        // FONCTIONS DE GESTION DE LA MODALE
        // ===============================
        function openUniversalModal(targetUrl, titleText) {
            modalTitle.textContent = titleText;
            modalDestinationIframe.src = targetUrl;
            modal.style.display = 'flex';
            checkOrientation();
            document.body.style.overflow = 'hidden';
            closeAllContactModals(); // Ferme les modales de contact si elles sont ouvertes
        }

        function closeUniversalModal() {
            modal.style.display = 'none';
            modalDestinationIframe.src = '';
            document.body.style.overflow = '';
        }

        // ===============================
        // FONCTIONS DE GESTION DU MODULE DE CONTACT
        // ===============================

        // Fonction pour fermer toutes les modales de contact
        function closeAllContactModals() {
            modalsContact.forEach(modal => {
                modal.classList.remove('active', ...modalColorClasses);
            });
        }

        // Fonction pour générer le QR code
        function generateQRCode(url, elementId) {
            const element = document.getElementById(elementId);
            element.innerHTML = '';
            new QRCode(element, {
                text: url,
                width: 128,
                height: 128,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
        }


        // ===============================
        // FONCTIONS DIVERSES
        // ===============================

        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(() => {
                if (modal.style.display === 'flex') {
                    closeUniversalModal();
                }
                closeAllContactModals();
                isContactOpen = false;
                buttonGroupContact.classList.add('hidden');
                mainIconContact.classList.remove('rotate-45');

                currentIndex = 0; // Retourne à l'écran d'accueil
                setPositionByIndex();
            }, inactivityTimeout);
        }

        function updateDateTime() {
            const now = new Date();
            const timeOptions = { hour: '2-digit', minute: '2-digit' };
            const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };

            document.getElementById('time-display').textContent = now.toLocaleTimeString('fr-FR', timeOptions);
            document.getElementById('date-display').textContent = now.toLocaleDateString('fr-FR', dateOptions);
        }

        function checkOrientation() {
            if (modal.style.display === 'flex') {
                if (window.innerHeight > window.innerWidth) {
                    modalContent.classList.add('portrait-mode');
                    modalDestinationIframe.classList.add('portrait-mode');
                    modalContent.classList.remove('landscape-mode');
                    modalDestinationIframe.classList.remove('landscape-mode');
                } else {
                    modalContent.classList.add('landscape-mode');
                    modalDestinationIframe.classList.add('landscape-mode');
                    modalContent.classList.remove('portrait-mode');
                    modalDestinationIframe.classList.remove('portrait-mode');
                }
            }
        }


        // ===============================
        // ÉCOUTEURS D'ÉVÉNEMENTS ET INITIALISATION
        // ===============================
        document.addEventListener('DOMContentLoaded', () => {
            updateSlider();
            resetInactivityTimer();
            updateDateTime();
            setInterval(updateDateTime, 1000);

            // Écouteurs pour le glissement de l'écran principal
            document.addEventListener('mousedown', handleStart);
            document.addEventListener('mousemove', handleMove);
            document.addEventListener('mouseup', handleEnd);
            document.addEventListener('touchstart', handleStart);
            document.addEventListener('touchmove', handleMove);
            document.addEventListener('touchend', handleEnd);
            document.addEventListener('wheel', handleWheel, { passive: false });
            
            // Écouteur pour les changements d'orientation et de redimensionnement de la fenêtre
            window.addEventListener('resize', checkOrientation);

            // Écouteurs pour les flèches de navigation
            prevArrow.addEventListener('click', () => {
                resetInactivityTimer();
                if (currentIndex > 0) {
                    currentIndex--;
                    setPositionByIndex();
                }
            });
            nextArrow.addEventListener('click', () => {
                resetInactivityTimer();
                if (currentIndex < screens.length - 1) {
                    currentIndex++;
                    setPositionByIndex();
                }
            });

            // Écouteurs pour les boutons d'ouverture de modale
            gridItems.forEach(item => {
                item.addEventListener('click', () => {
                    resetInactivityTimer();
                    const targetUrl = item.dataset.modalTarget;
                    const titleText = item.dataset.modalTitle;
                    openUniversalModal(targetUrl, titleText);
                });
            });

            // Écouteurs pour le bouton de fermeture de la modale universelle
            closeButton.addEventListener('click', () => {
                resetInactivityTimer();
                closeUniversalModal();
            });

            // Gère la fermeture de la modale universelle lorsque l'on clique en dehors
            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    resetInactivityTimer();
                    closeUniversalModal();
                }
            });

            // Gère l'ouverture/fermeture du groupe de boutons du module de contact
            mainButtonContact.addEventListener('click', () => {
                resetInactivityTimer();
                isContactOpen = !isContactOpen;
                if (isContactOpen) {
                    buttonGroupContact.classList.remove('hidden');
                    mainIconContact.classList.add('rotate-45');
                    closeUniversalModal();
                } else {
                    buttonGroupContact.classList.add('hidden');
                    mainIconContact.classList.remove('rotate-45');
                    closeAllContactModals();
                }
            });

            // Gère l'ouverture des modales spécifiques et le changement de couleur
            socialButtons.forEach(button => {
                button.addEventListener('click', (event) => {
                    resetInactivityTimer();
                    closeAllContactModals();
                    const buttonId = event.currentTarget.id;
                    const modalId = 'modal-' + buttonId.replace('btn-', '');
                    const targetModal = document.getElementById(modalId);
                    
                    if (targetModal) {
                        targetModal.classList.add('active', 'modal-' + buttonId.replace('btn-', ''));
                    }

                    if (buttonId === 'btn-facebook') {
                        generateQRCode('https://www.facebook.com/Destination.Sud.Reunion.974', 'qrcode-facebook');
                    } else if (buttonId === 'btn-instagram') {
                        generateQRCode('https://www.instagram.com/destinationsudreunion/?hl=fr', 'qrcode-instagram');
                    }
                });
            });

            // Gère la fermeture des modales de contact via le bouton 'x'
            closeButtonsContact.forEach(button => {
                button.addEventListener('click', (event) => {
                    resetInactivityTimer();
                    const modalToClose = event.target.closest('.modal-contact');
                    if (modalToClose) {
                        modalToClose.classList.remove('active', ...modalColorClasses);
                    }
                });
            });

            // Gère la soumission du formulaire de message
            if (messageForm) {
                messageForm.addEventListener('submit', async (event) => {
                    event.preventDefault();

                    const statusElement = document.getElementById('message-status');
                    const formButton = messageForm.querySelector('button[type="submit"]');

                    statusElement.textContent = 'Envoi en cours...';
                    statusElement.classList.remove('hidden');
                    formButton.disabled = true;

                    try {
                        const formData = new FormData(messageForm);
                        const response = await fetch('https://formspree.io/f/mgvzjnvl', {
                            method: 'POST',
                            body: formData,
                            headers: {
                                'Accept': 'application/json'
                            }
                        });

                        if (response.ok) {
                            statusElement.textContent = 'Message envoyé !';
                            messageForm.reset();
                            setTimeout(() => {
                                statusElement.classList.add('hidden');
                                closeAllContactModals();
                            }, 3000);
                        } else {
                            statusElement.textContent = 'Une erreur est survenue.';
                            const data = await response.json();
                            if (data.errors) {
                                statusElement.textContent = data.errors.map(error => error.message).join(", ");
                            }
                        }
                    } catch (error) {
                        statusElement.textContent = 'Erreur: Impossible de se connecter au serveur.';
                        console.error('Erreur de soumission du formulaire:', error);
                    } finally {
                        formButton.disabled = false;
                    }
                });
            }

            // Gère la soumission du formulaire de newsletter
            if (newsletterForm) {
                newsletterForm.addEventListener('submit', async (event) => {
                    event.preventDefault();

                    const statusElement = document.getElementById('newsletter-status');
                    const formButton = newsletterForm.querySelector('button[type="submit"]');

                    statusElement.textContent = "Abonnement en cours...";
                    statusElement.classList.remove('hidden');
                    formButton.disabled = true;

                    try {
                        const formData = new FormData(newsletterForm);
                        const response = await fetch('https://formspree.io/f/xovlokvl', {
                            method: 'POST',
                            body: formData,
                            headers: {
                                'Accept': 'application/json'
                            }
                        });

                        if (response.ok) {
                            statusElement.textContent = 'Abonnement confirmé !';
                            newsletterForm.reset();
                            setTimeout(() => {
                                statusElement.classList.add('hidden');
                                closeAllContactModals();
                            }, 3000);
                        } else {
                            statusElement.textContent = "Une erreur est survenue.";
                            const data = await response.json();
                            if (data.errors) {
                                statusElement.textContent = data.errors.map(error => error.message).join(", ");
                            }
                        }
                    } catch (error) {
                        statusElement.textContent = 'Erreur: Impossible de se connecter au serveur.';
                        console.error('Erreur de soumission du formulaire de newsletter:', error);
                    } finally {
                        formButton.disabled = false;
                    }
                });
            }

            // Gère l'inactivité globale
            document.addEventListener('mousemove', resetInactivityTimer);
            document.addEventListener('touchstart', resetInactivityTimer);
            
            // Écouteur pour fermer les modales de contact si on clique en dehors
            document.addEventListener('click', (event) => {
                const isClickInsideModule = event.target.closest('.module-container');
                const isClickInsideUniversalModal = event.target.closest('#universal-modal');
                if (!isClickInsideModule && !isClickInsideUniversalModal && isContactOpen) {
                    closeAllContactModals();
                    buttonGroupContact.classList.add('hidden');
                    mainIconContact.classList.remove('rotate-45');
                    isContactOpen = false;
                }
            });
        });
    </script>
</body>
</html>
