<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello Screen</title>
    <!-- Inclut Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Pacifico&display=swap" rel="stylesheet" />
    <style>
        /* ===== Base Styles ===== */
        :root {
            --primary-font: 'Inter', sans-serif;
            --secondary-font: 'Pacifico', cursive;
            --text-color: #fff;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text-color: #fff;
            }
        }

        /* ===== Font Styles ===== */
        .font-apple-hello {
            font-family: var(--secondary-font);
            font-weight: 400;
            white-space: nowrap;
            display: inline-block;
        }

        /* ===== Glassmorphism ===== */
        .frosted-glass {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* ===== Animation Styles ===== */
        .animate-letter {
            opacity: 0;
            transform: translateY(20px) scale(0.8);
            display: inline-block;
            animation: letterDraw 0.8s ease-out forwards;
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        @keyframes letterDraw {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.8);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .swipe-up-text-wrapper {
            font-family: var(--primary-font);
            font-weight: 400;
            font-size: 1.125rem;
            line-height: 1.75rem;
            opacity: 0;
            color: var(--text-color);
            white-space: nowrap;
            display: inline-block;
            transform: translateY(30px);
            animation: swipeUpAppear 0.8s ease-out forwards;
        }

        @keyframes swipeUpAppear {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 0.9;
                transform: translateY(0);
            }
        }

        .home-indicator-base {
            width: 8rem;
            height: 0.375rem;
            background-color: white;
            border-radius: 9999px;
            opacity: 0.7;
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
        }

        .home-indicator-base:hover {
            transform: scale(1.1);
            opacity: 1;
        }

        .home-indicator-slide-in {
            animation: slideDownBar 0.8s ease-out forwards;
        }

        @keyframes slideDownBar {
            0% {
                opacity: 0;
                transform: translateY(10px);
            }
            100% {
                opacity: 0.7;
                transform: translateY(0);
            }
        }

        .wifi-active {
            animation: wifiPulse 1.5s infinite ease-in-out;
        }

        @keyframes wifiPulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes timePopIn {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(10px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* ===== Layout Styles ===== */
        #lock-screen-container {
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
        }

        #lock-screen-container.fade-out {
            opacity: 0;
            transform: translateY(-50px);
            pointer-events: none;
        }

        /* ===== Component Styles ===== */
        .large-time {
            font-family: var(--primary-font);
            font-weight: 600;
            font-size: 5rem;
            line-height: 1;
            color: var(--text-color);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            animation: timePopIn 1s ease-out;
        }

        .current-date {
            font-family: var(--primary-font);
            font-weight: 400;
            font-size: 1.5rem;
            color: var(--text-color);
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        #video-background {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            z-index: -100;
            background-size: cover;
            overflow: hidden;
            transform: translate3d(0, 0, 0);
            will-change: transform;
        }
        
        /* ===== Responsive Styles (Écran principal) ===== */
        @media (max-width: 767px) {
            .large-time { font-size: 3rem; }
            .current-date { font-size: 1rem; }
            .swipe-up-text-wrapper { font-size: 1rem; }
            .home-indicator-base { width: 5rem; }
        }

        @media (min-width: 768px) and (max-width: 1023px) {
            .large-time { font-size: 4rem; }
            .current-date { font-size: 1.25rem; }
            .swipe-up-text-wrapper { font-size: 1.1rem; }
        }

        @media (min-width: 1024px) {
            .large-time { font-size: 5rem; }
            .current-date { font-size: 1.5rem; }
            .swipe-up-text-wrapper { font-size: 1.125rem; }
        }
    </style>
    <!-- Lie au manifeste de l'application web pour les fonctionnalités PWA -->
    <link rel="manifest" href="manifest.json">
</head>
<body class="h-screen w-screen relative overflow-hidden text-white font-inter">

    <video autoplay muted loop id="video-background" class="absolute inset-0 w-full h-full object-cover z-0">
        <source src="Apps/Photos/Images Vidéos/Destination Sud Réunion_HD.mp4" type="video/mp4" />
        Votre navigateur ne supporte pas la vidéo.
    </video>

    <div id="lock-screen-container" class="absolute inset-0 z-10">
        <div class="absolute top-0 right-0 left-0 flex justify-end items-center p-4 text-sm md:text-base z-20">
            <div class="flex items-center gap-3">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.88 94.72" fill="currentColor" class="w-5 h-5">
                    <path d="M61.44 6.72c-15.42 0-30.84 5.86-42.48 17.5-23.36 23.36-23.36 61.32 0 84.68 11.64 11.64 27.06 17.5 42.48 17.5s30.84-5.86 42.48-17.5c23.36-23.36 23.36-61.32 0-84.68C92.28 12.58 76.86 6.72 61.44 0C27.52 0 0 27.52 0 61.44c0 33.92 27.52 61.44 61.44 61.44s61.44-27.52 61.44-61.44C122.88 27.52 95.36 0 61.44 0zM61.44 10.3c28.84 0 52.28 23.44 52.28 52.28s-23.44 52.28-52.28 52.28S9.16 91.24 9.16 61.44 32.6 10.3 61.44 10.3z"/>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.248 32.248" fill="currentColor" class="w-6 h-6 wifi-icon">
                    <path d="M26.471,8.083c-0.426-0.219-0.841-0.259-1.291-0.259h-2.12c-0.27-2.302-2.223-4.14-4.577-4.14h-5.632c-2.354,0-4.306,1.838-4.577,4.14h-2.12c-0.45,0-0.865,0.041-1.291,0.259C3.896,8.232,2.02,10.74,2.02,13.78v4.689c0,3.041,1.876,5.549,4.242,5.698c0.426,0.219,0.841,0.259,1.291,0.259h2.12c0.27,2.302,2.223,4.14,4.577,4.14h5.632c2.354,0,4.306-1.838,4.577-4.14h2.12c0.45,0,0.865-0.041,1.291-0.259c2.366-0.149,4.242-2.657,4.242-5.698v-4.689C30.228,10.74,28.352,8.232,26.471,8.083z"/>
                </svg>
            </div>
        </div>

        <div id="date-time-container" class="absolute left-1/2 transform -translate-x-1/2 top-[20%] text-center">
            <div id="current-date" class="text-lg font-medium"></div>
            <div id="current-large-time" class="text-6xl md:text-7xl font-bold mt-2"></div>
        </div>

        <div id="hello-text-container" class="absolute left-1/2 transform -translate-x-1/2 top-1/2 text-white drop-shadow-lg text-7xl md:text-8xl lg:text-9xl font-[Pacifico]">
        </div>

        <div class="absolute bottom-0 w-full flex flex-col items-center p-6 pb-8 space-y-4 z-20">
            <div id="swipe-up-text-container" class="text-lg md:text-xl text-white opacity-90"></div>
            <div id="home-indicator-bar" class="w-32 h-1.5 bg-white rounded-full opacity-70"></div>
        </div>
    </div>
    
    <script>
        // ===============================
        // Configuration
        // ===============================
        const helloWords = [
            { lang: 'en', text: 'hello', locale: 'en-US' },
            { lang: 'fr', text: 'bonjour', locale: 'fr-FR' },
            { lang: 'es', text: 'hola', locale: 'es-ES' },
            { lang: 'de', text: 'hallo', locale: 'de-DE' },
            { lang: 'ja', text: 'こんにちは', locale: 'ja-JP' },
            { lang: 'zh', text: '你好', locale: 'zh-CN' },
            { lang: 'ar', text: 'مرحبا', locale: 'ar-SA' },
            { lang: 'ru', text: 'привет', locale: 'ru-RU' }
        ];

        const swipeUpWords = [
            { lang: 'en', text: 'Swipe up to open' },
            { lang: 'fr', text: 'Faites glisser vers le haut pour ouvrir' },
            { lang: 'es', text: 'Desliza hacia arriba para abrir' },
            { lang: 'de', text: 'Zum Öffnen nach oben wischen' },
            { lang: 'ja', text: '上にスワイプして開く' },
            { lang: 'zh', text: '向上滑动以打开' },
            { lang: 'ar', text: 'اسحب لأعلى للفتح' },
            { lang: 'ru', text: 'Проведите вверх, чтобы открыть' }
        ];

        // ===============================
        // Variables globales
        // ===============================
        let currentIndex = 0;
        let currentDisplayLocale = helloWords[currentIndex].locale;
        let animationInterval, dateTimeInterval, wifiCheckInterval;
        let startY = 0, endY = 0;
        const swipeThreshold = 80;

        const elements = {
            lockScreenContainer: document.getElementById('lock-screen-container'),
            helloContainer: document.getElementById('hello-text-container'),
            swipeUpContainer: document.getElementById('swipe-up-text-container'),
            homeIndicatorBar: document.getElementById('home-indicator-bar'),
            currentDateDiv: document.getElementById('current-date'),
            currentLargeTimeDiv: document.getElementById('current-large-time'),
            wifiIconSvg: document.querySelector('.wifi-icon'),
            videoBackground: document.getElementById('video-background')
        };

        // ===============================
        // Fonctions de l'écran de verrouillage
        // ===============================
        function updateDateTime() {
            const now = new Date();
            const timeFormatter = new Intl.DateTimeFormat(currentDisplayLocale, { hour: 'numeric', minute: '2-digit', hour12: false });
            const dateFormatter = new Intl.DateTimeFormat(currentDisplayLocale, { weekday: 'long', month: 'long', day: 'numeric' });
            elements.currentLargeTimeDiv.textContent = timeFormatter.format(now);
            elements.currentDateDiv.textContent = dateFormatter.format(now);
        }

        async function checkWifiConnectivity() {
            if (!navigator.onLine) {
                elements.wifiIconSvg.classList.remove('wifi-active');
                return;
            }
            try {
                await fetch(`https://www.google.com/favicon.ico?t=${new Date().getTime()}`, { mode: 'no-cors', cache: 'no-store' });
                elements.wifiIconSvg.classList.add('wifi-active');
            } catch (error) {
                elements.wifiIconSvg.classList.remove('wifi-active');
            }
        }
        
        function clearIntervals() {
            clearInterval(animationInterval);
            clearInterval(dateTimeInterval);
            clearInterval(wifiCheckInterval);
        }

        function startLockScreenAnimations() {
            clearIntervals();
            updateTexts();
            animationInterval = setInterval(updateTexts, 4000);
            updateDateTime();
            dateTimeInterval = setInterval(updateDateTime, 1000);
            checkWifiConnectivity();
            wifiCheckInterval = setInterval(checkWifiConnectivity, 10000);
        }

        // ===============================
        // Animation du texte
        // ===============================
        function fadeOutElements(oldHelloWrapper, oldSwipeUpWrapper) {
            if (oldHelloWrapper) {
                oldHelloWrapper.querySelectorAll('.animate-letter').forEach(letter => {
                    letter.style.opacity = '0';
                    letter.style.transform = 'translateY(-20px) scale(0.8)';
                });
            }
            if (oldSwipeUpWrapper) {
                oldSwipeUpWrapper.style.opacity = '0';
                oldSwipeUpWrapper.style.transform = 'translateY(-20px)';
            }
            if (elements.homeIndicatorBar) {
                elements.homeIndicatorBar.style.opacity = '0';
                elements.homeIndicatorBar.style.transform = 'translateY(-10px)';
            }
        }

        function removeOldElements(oldHelloWrapper, oldSwipeUpWrapper) {
            if (oldHelloWrapper?.parentNode) oldHelloWrapper.parentNode.removeChild(oldHelloWrapper);
            if (oldSwipeUpWrapper?.parentNode) oldSwipeUpWrapper.parentNode.removeChild(oldSwipeUpWrapper);
        }

        function drawNewHelloWord(text) {
            const wordWrapper = document.createElement('div');
            wordWrapper.className = 'font-apple-hello';
            Array.from(text).forEach((char, index) => {
                const letterSpan = document.createElement('span');
                letterSpan.textContent = char;
                letterSpan.className = 'animate-letter';
                letterSpan.style.animationDelay = `${index * 0.1}s`;
                wordWrapper.appendChild(letterSpan);
            });
            elements.helloContainer.appendChild(wordWrapper);
        }

        function drawNewSwipeUpText(text) {
            const textWrapper = document.createElement('div');
            textWrapper.className = 'swipe-up-text-wrapper';
            textWrapper.textContent = text;
            elements.swipeUpContainer.appendChild(textWrapper);
        }

        function animateHomeIndicator() {
            if (elements.homeIndicatorBar) {
                elements.homeIndicatorBar.classList.remove('home-indicator-slide-in');
                void elements.homeIndicatorBar.offsetWidth;
                elements.homeIndicatorBar.classList.add('home-indicator-slide-in');
            }
        }

        async function updateTexts() {
            const { text: helloText, locale } = helloWords[currentIndex];
            const { text: swipeUpText } = swipeUpWords[currentIndex];
            currentDisplayLocale = locale;
            updateDateTime();

            const oldHelloWrapper = elements.helloContainer.querySelector('.font-apple-hello');
            const oldSwipeUpWrapper = elements.swipeUpContainer.querySelector('.swipe-up-text-wrapper');
            
            fadeOutElements(oldHelloWrapper, oldSwipeUpWrapper);
            await new Promise(resolve => setTimeout(resolve, 600));
            
            removeOldElements(oldHelloWrapper, oldSwipeUpWrapper);
            
            drawNewHelloWord(helloText);
            await new Promise(resolve => setTimeout(resolve, 800));
            
            drawNewSwipeUpText(swipeUpText);
            animateHomeIndicator();
            
            currentIndex = (currentIndex + 1) % helloWords.length;
        }

        // ===============================
        // Gestion de l'état (Verrouillé / Déverrouillé)
        // ===============================
        function unlockScreen() {
            elements.lockScreenContainer.classList.add('fade-out');
            setTimeout(() => {
                window.location.href = 'accueil.html'; // Redirection vers la page d'accueil
            }, 500);
        }

        // ===============================
        // Événements Utilisateur
        // ===============================
        function handleTouchStart(e) { startY = e.touches[0].clientY; }
        function handleTouchMove(e) { endY = e.touches[0].clientY; }
        function handleTouchEnd() {
            if (startY && startY - endY > swipeThreshold) {
                unlockScreen();
            }
            startY = 0; endY = 0;
        }

        function handleWheel(e) {
            if (e.deltaY > swipeThreshold) {
                unlockScreen();
            }
        }

        document.body.addEventListener('touchstart', handleTouchStart);
        document.body.addEventListener('touchmove', handleTouchMove);
        document.body.addEventListener('touchend', handleTouchEnd);
        document.body.addEventListener('wheel', handleWheel);

        document.addEventListener("mousemove", (e) => {
            const x = (e.clientX / window.innerWidth - 0.5) * 10;
            const y = (e.clientY / window.innerHeight - 0.5) * 10;
            if (elements.videoBackground) {
                elements.videoBackground.style.transform = `translate(${x}px, ${y}px) scale(1.05)`;
            }
        });

        // ===============================
        // Initialisation
        // ===============================
        document.addEventListener('DOMContentLoaded', startLockScreenAnimations);
    </script>
</body>
</html>
