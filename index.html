<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borne Numérique Destination Sud Réunion</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Styles personnalisés pour la borne */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-size: 16px;
        }

        /* Conteneur pour la vidéo de fond */
        .background-video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -100;
            overflow: hidden;
        }

        /* Vidéo de fond */
        #background-video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            padding: 20px;
        }

        .language-switcher {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }
        
        .language-switcher img {
            width: 40px;
            height: 40px;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid transparent;
            transition: border-color 0.3s ease;
        }

        .language-switcher img:hover {
            border-color: white;
        }

        /* Conteneur pour les deux logos en haut à gauche et à droite */
        .top-logos {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }
        
        .top-logos img {
            height: 50px;
        }
        
        /* Augmentation de la taille et de l'espacement de la grille d'icônes */
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            max-width: 90%;
            margin-top: 20px;
        }

        /* Modification de la taille des boutons pour une taille fixe */
        .icon-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 180px;
            height: 180px;
            padding: 1.5rem;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
            color: white;
            font-weight: bold;
            text-align: center;
            transition: transform 0.2s, background-color 0.2s;
            overflow: hidden;
            border: none;
        }

        .icon-button:hover {
            transform: scale(1.05);
            background-color: rgba(255, 255, 255, 0.3);
        }

        /* Augmentation de la taille des icônes SVG */
        .icon-button svg {
            width: 70px;
            height: 70px;
            margin-bottom: 0.5rem;
            stroke: white;
            fill: none;
            stroke-width: 2;
        }

        .icon-button img {
            width: 70px;
            height: 70px;
            margin-bottom: 0.5rem;
        }
        
        /* Styles pour le bouton d'accessibilité et son panneau */
        .accessibility-button {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 100;
            width: 60px;
            height: 60px;
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .accessibility-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        .accessibility-panel {
            position: absolute;
            bottom: 90px;
            left: 20px;
            z-index: 100;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 1rem;
            display: none; /* Caché par défaut */
            flex-direction: column;
            gap: 10px;
        }

        .panel-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 10px 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border: 2px solid white;
            border-radius: 0.5rem;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .panel-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .panel-button.active {
            background-color: #38a169;
        }
        
        /* Styles pour l'affichage de la date et l'heure */
        #date-time-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            color: white;
        }
        
        #date-display {
            font-size: 1rem;
            font-weight: 400; /* Poids de police régulier pour la date */
            margin-bottom: -0.5rem; /* Ajustement de l'espacement entre la date et l'heure */
        }
        
        #time-display {
            font-size: 3rem; /* Grande taille pour l'heure */
            font-weight: 700; /* Poids de police gras pour l'heure */
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 1s ease-in;
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen">
    <!-- Conteneur pour la vidéo de fond gérée par JS -->
    <div class="background-video-container">
        <video id="background-video" autoplay muted loop playsinline>
            <source src="Destination Sud Réunion_HD.mp4" type="video/mp4">
            Votre navigateur ne supporte pas la vidéo en arrière-plan.
        </video>
    </div>
    
    <!-- Conteneur pour les deux logos -->
    <div class="top-logos">
        <img src="https://srias.re/wp-content/uploads/2020/12/Destination-Sud-Reunion-png-1-min.png" alt="Logo Destination Sud Réunion" class="h-12" role="img" aria-label="Logo Destination Sud Réunion">
        <img src="https://www.sudreuniontourisme.fr/fileadmin/user_upload/Sud/logo.png" alt="Logo Sud Réunion Tourisme" class="h-12" role="img" aria-label="Logo Sud Réunion Tourisme">
    </div>

    <!-- Langues Switcher -->
    <div class="language-switcher flex space-x-4">
        <img id="lang-fr" src="https://flagcdn.com/w40/fr.png" alt="Drapeau Français" data-lang="fr" role="button" aria-label="Changer la langue en français" tabindex="0">
        <img id="lang-en" src="https://flagcdn.com/w40/gb.png" alt="Drapeau Anglais" data-lang="en" role="button" aria-label="Change language to English" tabindex="0">
        <img id="lang-es" src="https://flagcdn.com/w40/es.png" alt="Drapeau Espagnol" data-lang="es" role="button" aria-label="Cambiar idioma a español" tabindex="0">
        <img id="lang-de" src="https://flagcdn.com/w40/de.png" alt="Drapeau Allemand" data-lang="de" role="button" aria-label="Sprache auf Deutsch ändern" tabindex="0">
    </div>

    <!-- Bouton pour l'accessibilité -->
    <button id="accessibility-btn" class="accessibility-button" role="button" aria-controls="accessibility-panel" aria-expanded="false" aria-label="Options d'accessibilité">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="white" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-accessible-icon"><circle cx="12" cy="12" r="10"/><path d="M9 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-3l-2-2h-2z"/><path d="M10 8h2l-2 2h-2"/></svg>
    </button>
    
    <!-- Panneau d'accessibilité -->
    <div id="accessibility-panel" class="accessibility-panel">
        <button id="high-contrast-btn" class="panel-button" role="button" aria-label="Activer le mode contraste élevé">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-contrast"><circle cx="12" cy="12" r="10"/><path d="M12 2a10 10 0 0 0 0 20z"/></svg>
            <span id="label-contrast">Contraste</span>
        </button>
        <button id="text-increase-btn" class="panel-button" role="button" aria-label="Augmenter la taille du texte">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-text-size"><path d="M21 10V6"/><path d="M14 10V6"/><path d="M14 6h7"/><path d="M21 10h-7"/><path d="M20 18H9"/><path d="M10 12v6"/><path d="M18 12v6"/><path d="M17 12H9"/></svg>
            <span id="label-text-increase">A+</span>
        </button>
        <button id="text-decrease-btn" class="panel-button" role="button" aria-label="Diminuer la taille du texte">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-text-size"><path d="M21 10V6"/><path d="M14 10V6"/><path d="M14 6h7"/><path d="M21 10h-7"/><path d="M18 12H9"/></svg>
            <span id="label-text-decrease">A-</span>
        </button>
    </div>

    <!-- Page de démarrage -->
    <main id="start-page" class="overlay" role="main" aria-labelledby="start-title">
        <!-- Affichage de la date et l'heure -->
        <div id="date-time-display" class="mb-8" role="timer" aria-live="polite">
            <span id="date-display"></span>
            <span id="time-display"></span>
        </div>
        
        <div class="flex flex-col items-center p-8 rounded-lg shadow-xl bg-gray-800 bg-opacity-70 max-w-xl w-full">
            <h1 id="start-title" class="text-3xl md:text-5xl font-bold mb-4">Bienvenue</h1>
            <p id="start-subtitle" class="text-lg md:text-xl mb-8">Veuillez sélectionner votre code postal pour continuer.</p>
            
            <!-- Liste déroulante des codes postaux -->
            <div class="w-full">
                <label for="zip-code-select" class="sr-only">Sélectionner un code postal</label>
                <select id="zip-code-select" class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300" aria-describedby="zip-code-description">
                    <option value="" disabled selected>Sélectionner un code postal</option>
                    <option value="97410">Saint-Pierre (97410)</option>
                    <option value="97427">L'Étang-Salé (97427)</option>
                    <option value="97436">Saint-Leu (97436)</option>
                    <option value="97480">Saint-Joseph (97480)</option>
                    <option value="97413">Cilaos (97413)</option>
                    <option value="97416">Entre-Deux (97416)</option>
                    <option value="97421">La Rivière Saint-Louis (97421)</option>
                    <option value="97424">Piton Saint-Leu (97424)</option>
                    <option value="97425">Les Avirons (97425)</option>
                    <option value="97426">Les Trois-Bassins (97426)</option>
                    <option value="97434">Saint-Gilles les Bains (97434)</option>
                    <option value="97441">Saint-Paul (97441)</option>
                    <option value="97442">Saint-Louis (97442)</option>
                    <option value="97443">Le Tampon (97443)</option>
                    <option value="97445">Saint-Gilles les Hauts (97445)</option>
                    <option value="97446">Saint-André (97446)</option>
                    <option value="97447">Saint-Benoît (97447)</option>
                    <option value="97450">Saint-Louis (97450)</option>
                    <option value="97460">Saint-Paul (97460)</option>
                    <option value="97470">Saint-Gilles les Bains (97470)</option>
                    <option value="97480">Saint-Joseph (97480)</option>
                    <option value="97490">Sainte-Clotilde (97490)</option>
                    <option value="97491">Sainte-Marie (97491)</option>
                    <option value="97492">Saint-Denis (97492)</option>
                    <option value="97493">Le Port (97493)</option>
                    <option value="97494">Saint-Paul (97494)</option>
                    <option value="97495">Sainte-Suzanne (97495)</option>
                </select>
                <div id="zip-code-description" class="sr-only">Cette liste déroulante permet de sélectionner un code postal.</div>
            </div>

            <!-- Bouton pour accéder à la page d'accueil -->
            <button id="enter-button" disabled class="mt-6 w-full py-3 px-6 rounded-lg bg-emerald-500 text-white font-bold text-lg hover:bg-emerald-600 transition duration-300 transform hover:scale-105 disabled:bg-gray-500 disabled:cursor-not-allowed" role="button" aria-disabled="true">
                Entrer
            </button>
        </div>
    </main>

    <!-- Contenu principal qui sera affiché après la sélection du code postal -->
    <main id="main-content" class="hidden overlay" role="main" aria-labelledby="city-title">
        <h1 id="city-title" class="text-4xl md:text-5xl font-bold"></h1>
        <!-- Ajout de "Office de Tourisme" en dessous du titre de la ville -->
        <p id="tourist-office-label" class="text-xl font-semibold mb-8"></p>
        <div class="icon-grid" role="group" aria-label="Options de la borne numérique">
            <!-- Boutons de la borne, avec les liens mis à jour -->
            <a href="a_voir.html" class="icon-button" role="button" aria-label="À voir, à faire">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                </svg>
                <span id="label-see">À voir / À faire</span>
            </a>
            <a href="ou_dormir.html" class="icon-button" role="button" aria-label="Où dormir ?">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
                <span id="label-sleep">Où dormir ?</span>
            </a>
            <a href="ou_manger.html" class="icon-button" role="button" aria-label="Où manger ?">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
                <span id="label-eat">Où manger ?</span>
            </a>
            <a href="agenda.html" class="icon-button" role="button" aria-label="Agenda">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                <span id="label-agenda">Agenda</span>
            </a>
            <a href="meteo_maree.html" class="icon-button" role="button" aria-label="Météo et marée">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.927A5.002 5.002 0 0012 6c-2.457 0-4.783 1.149-6.322 2.972l-.337.351-1.396.985A1 1 0 003 15z" />
                </svg>
                <span id="label-forecast">Météo & marée</span>
            </a>
            <a href="carte_interactive.html" class="icon-button" role="button" aria-label="Carte interactive">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span id="label-map">Carte interactive</span>
            </a>
            <a href="sorties.html" class="icon-button" role="button" aria-label="Sorties possibles">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                </svg>
                <span id="label-outings">Sorties possibles</span>
            </a>
            <a href="actualites.html" class="icon-button" role="button" aria-label="Actualités">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 12V9m0 3a2 2 0 100 4 2 2 0 000-4z" />
                </svg>
                <span id="label-news">Actualités</span>
            </a>
            <a href="transports.html" class="icon-button" role="button" aria-label="Transports">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14v4m0 0a2 2 0 100-4 2 2 0 000 4zm0-10v4m0 0a2 2 0 100-4 2 2 0 000 4z" />
                </svg>
                <span id="label-transport">Transports</span>
            </a>
        </div>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const startPage = document.getElementById('start-page');
            const mainContent = document.getElementById('main-content');
            const zipCodeSelect = document.getElementById('zip-code-select');
            const enterButton = document.getElementById('enter-button');
            const cityTitle = document.getElementById('city-title');
            const accessibilityBtn = document.getElementById('accessibility-btn');
            const accessibilityPanel = document.getElementById('accessibility-panel');
            const highContrastBtn = document.getElementById('high-contrast-btn');
            const textIncreaseBtn = document.getElementById('text-increase-btn');
            const textDecreaseBtn = document.getElementById('text-decrease-btn');
            const htmlElement = document.documentElement;
            const dateDisplay = document.getElementById('date-display');
            const timeDisplay = document.getElementById('time-display');
            const touristOfficeLabel = document.getElementById('tourist-office-label');

            const textElements = {
                'start-title': {'fr': 'Bienvenue', 'en': 'Welcome', 'es': 'Bienvenido', 'de': 'Willkommen'},
                'start-subtitle': {'fr': 'Veuillez sélectionner votre code postal pour continuer.', 'en': 'Please select your zip code to continue.', 'es': 'Por favor, seleccione su código postal para continuar.', 'de': 'Bitte wählen Sie Ihre Postleitzahl aus, um fortzufahren.'},
                'enter-button': {'fr': 'Entrer', 'en': 'Enter', 'es': 'Entrar', 'de': 'Eingeben'},
                'tourist-office-label': {'fr': 'Office de Tourisme', 'en': 'Tourist Office', 'es': 'Oficina de Turismo', 'de': 'Touristenbüro'},
                'label-see': {'fr': 'À voir / À faire', 'en': 'To see / To do', 'es': 'Para ver / Para hacer', 'de': 'Sehenswert / Aktivitäten'},
                'label-sleep': {'fr': 'Où dormir ?', 'en': 'Where to sleep?', 'es': '¿Dónde dormir?', 'de': 'Wo übernachten?'},
                'label-eat': {'fr': 'Où manger ?', 'en': 'Where to eat?', 'es': '¿Dónde comer?', 'de': 'Wo essen?'},
                'label-agenda': {'fr': 'Agenda', 'en': 'Agenda', 'es': 'Agenda', 'de': 'Agenda'},
                'label-forecast': {'fr': 'Météo & marée', 'en': 'Weather & tide', 'es': 'Clima y marea', 'de': 'Wetter & Gezeiten'},
                'label-map': {'fr': 'Carte interactive', 'en': 'Interactive map', 'es': 'Mapa interactivo', 'de': 'Interaktive Karte'},
                'label-outings': {'fr': 'Sorties possibles', 'en': 'Possible outings', 'es': 'Posibles salidas', 'de': 'Mögliche Ausflüge'},
                'label-news': {'fr': 'Actualités', 'en': 'News', 'es': 'Noticias', 'de': 'Aktuelles'},
                'label-transport': {'fr': 'Transports', 'en': 'Transport', 'es': 'Transporte', 'de': 'Transport'},
                'select-option': {'fr': 'Sélectionner un code postal', 'en': 'Select a zip code', 'es': 'Seleccionar un código postal', 'de': 'Wählen Sie eine Postleitzahl'},
                'label-contrast': {'fr': 'Contraste', 'en': 'Contrast', 'es': 'Contraste', 'de': 'Kontrast'},
                'label-text-increase': {'fr': 'A+', 'en': 'A+', 'es': 'A+', 'de': 'A-'},
                'label-text-decrease': {'fr': 'A-', 'en': 'A-', 'es': 'A-', 'de': 'A-'}
            };
            
            const cityNames = {
                '97410': 'Saint-Pierre',
                '97427': 'L\'Étang-Salé',
                '97442': 'Saint-Louis',
                '97425': 'Les Avirons',
                '97480': 'Petite-Île',
            };

            let currentLang = 'fr';
            let dateTimeInterval;
            
            function updateDateTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString(currentLang + '-FR', { hour: '2-digit', minute: '2-digit' });
                const dateString = now.toLocaleDateString(currentLang + '-' + (currentLang === 'de' ? 'DE' : (currentLang === 'es' ? 'ES' : (currentLang === 'en' ? 'GB' : 'FR'))), { weekday: 'long', day: '2-digit', month: 'long' });
                
                dateDisplay.textContent = dateString;
                timeDisplay.textContent = timeString;
            }

            function setLanguage(lang) {
                currentLang = lang;
                document.documentElement.lang = lang;

                document.getElementById('start-title').textContent = textElements['start-title'][lang];
                document.getElementById('start-subtitle').textContent = textElements['start-subtitle'][lang];
                document.getElementById('enter-button').textContent = textElements['enter-button'][lang];
                zipCodeSelect.options[0].textContent = textElements['select-option'][lang];
                document.getElementById('label-contrast').textContent = textElements['label-contrast'][lang];
                document.getElementById('label-text-increase').textContent = textElements['label-text-increase'][lang];
                document.getElementById('label-text-decrease').textContent = textElements['label-text-decrease'][lang];
                touristOfficeLabel.textContent = textElements['tourist-office-label'][lang];
                
                const buttons = document.querySelectorAll('#main-content .icon-button span');
                buttons.forEach(span => {
                    const id = span.id;
                    if (textElements[id]) {
                        span.textContent = textElements[id][lang];
                    }
                });

                clearInterval(dateTimeInterval);
                updateDateTime();
                dateTimeInterval = setInterval(updateDateTime, 1000);
            }

            document.getElementById('lang-fr').addEventListener('click', () => setLanguage('fr'));
            document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));
            document.getElementById('lang-es').addEventListener('click', () => setLanguage('es'));
            document.getElementById('lang-de').addEventListener('click', () => setLanguage('de'));
            
            enterButton.addEventListener('click', () => {
                const selectedCode = zipCodeSelect.value;
                if (selectedCode) {
                    localStorage.setItem('kiosk-zip-code', selectedCode);
                    mainContent.classList.remove('hidden');
                    startPage.classList.add('hidden');
                    cityTitle.textContent = cityNames[selectedCode] || 'Destination Sud Réunion';
                }
            });

            zipCodeSelect.addEventListener('change', () => {
                enterButton.disabled = !zipCodeSelect.value;
                enterButton.setAttribute('aria-disabled', enterButton.disabled);
            });
            
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js')
                        .then(registration => {
                            console.log('Service Worker enregistré avec succès:', registration);
                        })
                        .catch(err => {
                            console.log('Échec de l\'enregistrement du Service Worker:', err);
                        });
                });
            }

            accessibilityBtn.addEventListener('click', () => {
                const isHidden = accessibilityPanel.style.display === 'none' || accessibilityPanel.style.display === '';
                accessibilityPanel.style.display = isHidden ? 'flex' : 'none';
                accessibilityBtn.setAttribute('aria-expanded', !isHidden);
            });

            highContrastBtn.addEventListener('click', () => {
                document.body.classList.toggle('high-contrast');
                const isHighContrast = document.body.classList.contains('high-contrast');
                localStorage.setItem('kiosk-high-contrast', isHighContrast);
            });

            textIncreaseBtn.addEventListener('click', () => {
                let currentSize = parseFloat(getComputedStyle(document.body).fontSize);
                currentSize += 2;
                if (currentSize <= 24) {
                    document.body.style.fontSize = `${currentSize}px`;
                    localStorage.setItem('kiosk-font-size', currentSize);
                }
            });

            textDecreaseBtn.addEventListener('click', () => {
                let currentSize = parseFloat(getComputedStyle(document.body).fontSize);
                currentSize -= 2;
                if (currentSize >= 12) {
                    document.body.style.fontSize = `${currentSize}px`;
                    localStorage.setItem('kiosk-font-size', currentSize);
                }
            });

            setLanguage('fr');
        });
    </script>
</body>
</html>
